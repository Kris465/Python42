# Регулярные выражения

    Регулярное выражение — это строка, задающая шаблон поиска подстрок в тексте. Одному шаблону может соответствовать много разных строчек. Термин «Регулярные выражения» является переводом английского словосочетания «Regular expressions». Перевод не очень точно отражает смысл, правильнее было бы «шаблонные выражения». Регулярное выражение, или коротко «регулярка», состоит из обычных символов и специальных командных последовательностей.

https://habr.com/ru/articles/349860/

Вот основные функции и методы, которые предоставляет модуль re:

1. Поиск совпадений:

   • re.search(pattern, string) — ищет первое совпадение шаблона в строке и возвращает объект Match, если найдено, или None, если не найдено.

   • re.match(pattern, string) — проверяет, соответствует ли начало строки заданному шаблону.

   • re.fullmatch(pattern, string) — проверяет, соответствует ли вся строка заданному шаблону.

2. Поиск всех совпадений:

   • re.findall(pattern, string) — возвращает список всех неперекрывающихся совпадений шаблона в строке.

   • re.finditer(pattern, string) — возвращает итератор с объектами Match для всех совпадений.

3. Замена:

   • re.sub(pattern, repl, string) — заменяет все совпадения шаблона в строке на указанную строку repl.

4. Разделение строки:

   • re.split(pattern, string) — разбивает строку по шаблону и возвращает список подстрок.

Пример:

```python
import re

# Пример строки
text = "Hello, my email is example@example.com and my phone number is 123-456-7890."

# Поиск email
email_pattern = r'\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}\b'
email_matches = re.findall(email_pattern, text)
print("Emails found:", email_matches)

# Поиск телефонного номера
phone_pattern = r'\bd{3}-d{3}-d{4}\b'
phone_matches = re.findall(phone_pattern, text)
print("Phone numbers found:", phone_matches)

# Замена email на [email]
masked_text = re.sub(email_pattern, '[email]', text)
print("Masked text:", masked_text)
```
Основные элементы регулярных выражений

• . — любой символ (кроме новой строки).

• ^ — начало строки.

• $ — конец строки.

• * — 0 или более повторений предыдущего элемента.

• + — 1 или более повторений предыдущего элемента.

• ? — 0 или 1 повторение предыдущего элемента.

• {n} — ровно n повторений предыдущего элемента.

• {n,} — n или более повторений.

• {n,m} — от n до m повторений.

• [] — класс символов (например, [a-z]).

• | — логическое "ИЛИ".

• () — группировка.

## Флаги

    Флаги в регулярных выражениях — это специальные параметры, которые изменяют поведение поиска и обработки шаблонов. Они позволяют настраивать регулярные выражения для более гибкой работы с текстом. В Python модуль re поддерживает несколько флагов, которые могут быть использованы при выполнении операций с регулярными выражениями. Вот основные из них:

1. re.IGNORECASE (или re.I)

Этот флаг позволяет игнорировать регистр символов при поиске. Например, шаблон r'abc' будет соответствовать как 'abc', так и 'ABC'.

```python
import re

text = "Hello World"
match = re.search(r'hello', text, re.IGNORECASE)
print(match)  # Вывод: <re.Match object; span=(0, 5), match='Hello'>
```
2. re.MULTILINE (или re.M)

При использовании этого флага символы ^ и $ будут соответствовать началу и концу каждой строки в многострочном тексте, а не только всей строки. Это полезно для работы с текстами, содержащими несколько строк.

```python
import re

text = "first line\nsecond line"
matches = re.findall(r'^second', text, re.MULTILINE)
print(matches)  # Вывод: ['second']
```

3. re.DOTALL (или re.S)

Этот флаг изменяет поведение метасимвола . так, что он будет соответствовать любому символу, включая символ новой строки. Без этого флага . соответствует всем символам, кроме новой строки.

```python
import re

text = "first line\nsecond line"
match = re.search(r'first.*second', text, re.DOTALL)
print(match.group())  # Вывод: 'first line\nsecond line'
```
4. re.VERBOSE (или re.X)

Этот флаг позволяет писать регулярные выражения более читабельно, игнорируя пробелы и позволяя использовать комментарии внутри шаблона. Это полезно для сложных выражений.

```python
import re

pattern = re.compile(r"""
    ^           # начало строки
    d{3}       # три цифры
    -           # дефис
    d{2}       # две цифры
    -           # дефис
    d{4}       # четыре цифры
    $           # конец строки
""", re.VERBOSE)

match = pattern.match("123-45-6789")
print(match)  # Вывод: <re.Match object; span=(0, 11), match='123-45-6789'>
```
5. re.ASCII (или re.A)

При использовании этого флага метасимволы и классы символов будут работать только с ASCII-символами. Это может быть полезно, если вы хотите ограничить поиск только английскими буквами и цифрами.

```python
import re

text = "Café"
match = re.search(r'w+', text, re.ASCII)
print(match)  # Вывод: <re.Match object; span=(0, 1), match='C'>
```

Как использовать флаги

Флаги могут быть переданы как третий аргумент в функции поиска, такие как re.search(), re.match(), re.findall() и другие. Также можно комбинировать несколько флагов с помощью оператора побитового ИЛИ (|).
```python
import re

text = "Hello World\nhello world"
matches = re.findall(r'hello', text, re.IGNORECASE | re.MULTILINE)
print(matches)  # Вывод: ['Hello', 'hello']
```
